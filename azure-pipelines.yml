trigger:
- master

pool:
  vmImage: 'windows-latest'

steps:
- script: npm i yarn -g;    
    yarn install ;
    Write-Host 'Install complete'
  displayName: 'Install'
  workingDirectory: 'website'

- script: npm i gatsby-cli -g;
    yarn build ;
    Write-Host 'Build complete'
  displayName: 'Build'
  workingDirectory: 'website'

- script: (dir . -Directory).FullName
  displayName: 'Test'
  workingDirectory: 'website'

# - task: PublishBuildArtifacts@1
#   inputs:
#     PathtoPublish: 'website/dist'
#     ArtifactName: 'drop'
#     publishLocation: 'Container'
    

# - task: AzureFileCopy@4
#   inputs:
#     SourcePath: 'website/public'
#     azureSubscription: 'Duff Dev/Test(b8e2a708-4c47-4930-bc42-6d65c9efcb6c)'
#     Destination: 'AzureBlob'
#     storage: 'duffblogstore'
#     ContainerName: '$web'

